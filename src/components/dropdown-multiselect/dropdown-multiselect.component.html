<div class="multiselect-container" dropdown autoClose="outsideClick">
    <button [ngClass]="config.buttonClasses" dropdownToggle>
        <span>{{config.buttonLabel}}</span> ({{selectedLength}})
        <span class="caret"></span>
    </button>
    <ul dropdownMenu class="dropdown-menu">
        <li *ngIf="config.showCheckAll" [ngClass]="{'with-border': !config.showUncheckAll }" class="top-section">
            <a class="dropdown-item" (click)="checkAll()">
                <i *ngIf="config.checkClasses.length > 0" [ngClass]="config.checkClasses"></i>
                <input *ngIf="config.checkClasses.length === 0" type="checkbox" name="check-all" checked="checked" readonly />
                <span> Check All</span>
            </a>
        </li>
        <li *ngIf="config.showUncheckAll" class="top-section with-border">
            <a (click)="uncheckAll()" class="dropdown-item">
                <i *ngIf="config.uncheckClasses.length > 0" [ngClass]="config.uncheckClasses"></i>
                <input *ngIf="config.uncheckClasses.length === 0" type="checkbox" name="uncheck-all" readonly />
                <span> Uncheck All</span>
            </a>
        </li>
        <li *ngFor="let row of model" role="menuitem">
            <a class="dropdown-item" (click)="toggleRow(row)">
                <i *ngIf="row.selected && config.checkClasses.length > 0" [ngClass]="config.checkClasses"></i>
                <input *ngIf="row.selected && config.checkClasses.length === 0" [name]="row.id + '-checkbox'" [(ngModel)]="row.selected" type="checkbox" />
                <span *ngIf="row.color" [style.background-color]="row.color" class="row-color"></span> 
                <span>{{row.label}}</span>
            </a>
        </li>
    </ul>
</div>